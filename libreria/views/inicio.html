<!DOCTYPE html>
<html lang="es">
{% load static %}

<head>
  <meta charset="UTF-8">
  <title>Monitoreo</title>
  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="icon" href="{% static 'img/favicon.png' %}" type="image/x-icon">
  <link rel="stylesheet" href="{% static 'css/ayuda.css' %}">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

</head>

<body class="bg-light">

  <div class="container py-4">
    <h1 class="mb-4 text-center">üîß Tablero de Monitoreo</h1>

    <div class="card mb-4">
      <div class="card-header bg-success text-white text-center fs-4">
        Informaci√≥n del Servicio
      </div>
      <div class="card-body">
        <div class="row">
          <ul class="list-group list-group-flush col-md-6">
            <li class="list-group-item"><strong>Nombre del Servicio:</strong> {{ sistema.nombre }}</li>
            <li class="list-group-item"><strong>Direcci√≥n:</strong> {{ sistema.ubicacion }}</li>
            <li class="list-group-item"><strong>Descripci√≥n:</strong> {{ sistema.descripcion }}</li>
            <li class="list-group-item"><strong>Latitud:</strong> {{ sistema.latitud }}</li>
            <li class="list-group-item"><strong>Longitud:</strong> {{ sistema.longitud }}</li>
          </ul>
          <div class="col-md-6">
            <div id="map"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header bg-success text-white text-center fs-4">
        Datos en Tiempo Real
      </div>
      <div class="card-body p-0">
        <table class="table table-bordered table-hover text-center mb-0">
          <thead class="table-light">
            <tr>
              <th>Fase</th>
              <th>Voltaje (V)</th>
              <th>Corriente (A)</th>
              <th>Factor de Potencia</th>
              <th>Potencia (W)</th>
              <th>Marca de Tiempo</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>A</td>
              <td><span id="voltage a">--</span></td>
              <td><span id="current a">--</span></td>
              <td><span id="angle a">--</span></td>
              <td><span id="power a">--</span></td>
              <td><span id="last_lec a">--</span></td>
            </tr>
            <tr>
              <td>B</td>
              <td><span id="voltage b">--</span></td>
              <td><span id="current b">--</span></td>
              <td><span id="angle b">--</span></td>
              <td><span id="power b">--</span></td>
              <td><span id="last_lec b">--</span></td>
            </tr>
            <tr>
              <td>C</td>
              <td><span id="voltage c">--</span></td>
              <td><span id="current c">--</span></td>
              <td><span id="angle c">--</span></td>
              <td><span id="power c">--</span></td>
              <td><span id="last_lec c">--</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div id="container" class="card mt-4">
      <div class="card-header bg-success text-white text-center fs-4">Serie temporal. </div>
      <div class="card-body">
        <div id="grafica-a"></div>
        <div id="grafica-b"></div>
        <div id="grafica-c"></div>
      </div>
    </div>

    <footer class="mt-5 text-center text-muted">
      <small>LADETEC 2025 </small>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- <script src="https://code.highcharts.com/stock/highstock.js"></script> -->

  <script src="{% static 'js/highcharts/highstock.js'%}"></script>
  <!-- <script src="{% static 'js/highcharts/data.js' %} "></script> -->
  <script src="{% static 'js/highcharts/exporting.js' %}"></script>
  <script src="{% static 'js/highcharts/export-data.js' %}"></script>
  <!-- <script src="{% static 'js/highcharts/accessibility.js' %} "></script> -->
  <!-- <script src="https://code.highcharts.com/themes/adaptive.js"></script> -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script>
    const lat = parseFloat("{{ sistema.latitud }}");
    const long = parseFloat("{{ sistema.longitud }}");
    const nombre = "{{ sistema.nombre }}";

  </script>
  <script src="{% static 'js/index.js' %}"></script>
</body>

</html>
